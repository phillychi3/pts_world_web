import{w as O,r as j}from"./index.uKdKqA0F.js";import{V as q}from"./scheduler.kygPaiAC.js";const R=O(void 0);function X(e,t){const{computePosition:s,autoUpdate:u,offset:m,shift:w,flip:d,arrow:p,size:h,autoPlacement:a,hide:l,inline:v}=q(R),r={open:!1,autoUpdateCleanup:()=>{}},M=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let b;const f="https://www.skeleton.dev/utilities/popups";let o,L;function x(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),L=o.querySelector(".arrow")??document.createElement("div")}x();function y(){if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${f}`);if(!s)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${f}`);if(!m)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${f}`);if(!w)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${f}`);if(!d)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${f}`);if(!p)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${f}`);const n=[];h&&n.push(h(t.middleware?.size)),a&&n.push(a(t.middleware?.autoPlacement)),l&&n.push(l(t.middleware?.hide)),v&&n.push(v(t.middleware?.inline)),s(e,o,{placement:t.placement??"bottom",middleware:[m(t.middleware?.offset??8),w(t.middleware?.shift??{padding:8}),d(t.middleware?.flip),p(t.middleware?.arrow??{element:L||null}),...n]}).then(({x:i,y:k,placement:P,middlewareData:T})=>{if(Object.assign(o.style,{left:`${i}px`,top:`${k}px`}),L){const{x:I,y:D}=T.arrow,z={top:"bottom",right:"left",bottom:"top",left:"right"}[P.split("-")[0]];Object.assign(L.style,{left:I!=null?`${I}px`:"",top:D!=null?`${D}px`:"",right:"",bottom:"",[z]:"-4px"})}})}function E(){o&&(r.open=!0,t.state&&t.state({state:r.open}),y(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),r.autoUpdateCleanup=u(e,o,y),b=Array.from(o?.querySelectorAll(M)))}function c(n){if(!o)return;const i=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{r.open=!1,t.state&&t.state({state:r.open}),o.style.opacity="0",o.setAttribute("inert",""),r.autoUpdateCleanup&&r.autoUpdateCleanup(),n&&n()},i)}function S(){r.open===!1?E():c()}function $(n){if(r.open===!1||e.contains(n.target))return;if(o&&o.contains(n.target)===!1){c();return}const i=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(i==="")return;o?.querySelectorAll(i)?.forEach(P=>{P.contains(n.target)&&c()})}const A=n=>{if(r.open===!1)return;const i=n.key;if(i==="Escape"){n.preventDefault(),e.focus(),c();return}b=Array.from(o?.querySelectorAll(M)),r.open&&document.activeElement===e&&(i==="ArrowDown"||i==="Tab")&&M.length>0&&b.length>0&&(n.preventDefault(),b[0].focus())};switch(t.event){case"click":e.addEventListener("click",S,!0),window.addEventListener("click",$,!0);break;case"hover":e.addEventListener("mouseover",E,!0),e.addEventListener("mouseleave",()=>c(),!0);break;case"focus-blur":e.addEventListener("focus",S,!0),e.addEventListener("blur",()=>c(),!0);break;case"focus-click":e.addEventListener("focus",E,!0),window.addEventListener("click",$,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${f}`)}return window.addEventListener("keydown",A,!0),y(),{update(n){c(()=>{t=n,y(),x()})},destroy(){e.removeEventListener("click",S,!0),e.removeEventListener("mouseover",E,!0),e.removeEventListener("mouseleave",()=>c(),!0),e.removeEventListener("focus",S,!0),e.removeEventListener("focus",E,!0),e.removeEventListener("blur",()=>c(),!0),window.removeEventListener("click",$,!0),window.removeEventListener("keydown",A,!0)}}}const U={};function F(e){return e==="local"?localStorage:sessionStorage}function C(e,t,s){const u=s?.serializer??JSON,m=s?.storage??"local";function w(d,p){F(m).setItem(d,u.stringify(p))}if(!U[e]){const d=O(t,a=>{const l=F(m).getItem(e);l&&a(u.parse(l));{const v=r=>{r.key===e&&a(r.newValue?u.parse(r.newValue):null)};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)}}),{subscribe:p,set:h}=d;U[e]={set(a){w(e,a),h(a)},update(a){const l=a(q(d));w(e,l),h(l)},subscribe:p}}return U[e]}const V=C("modeOsPrefers",!1),H=C("modeUserPrefers",void 0),W=C("modeCurrent",!1);function Y(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return V.set(e),e}function g(e){H.set(e)}function B(e){const t=document.documentElement.classList,s="dark";e===!0?t.remove(s):t.add(s),W.set(e)}function G(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",s=!("modeUserPrefers"in localStorage),u=window.matchMedia("(prefers-color-scheme: dark)").matches;t||s&&u?e.add("dark"):e.remove("dark")}const Q="(prefers-reduced-motion: reduce)";function _(){return window.matchMedia(Q).matches}const Z=j(_(),e=>{{const t=u=>{e(u.matches)},s=window.matchMedia(Q);return s.addEventListener("change",t),()=>{s.removeEventListener("change",t)}}});export{G as a,B as b,g as c,X as d,Y as g,W as m,Z as p,R as s};
